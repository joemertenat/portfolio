<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Portfolio — Simplified Slides</title>

  <!-- Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600&display=swap" rel="stylesheet"/>


  <style>
    :root{
      --bg: #0f1012;
      --ink: #0a0a0a;
      --panelBorder: rgba(0,0,0,0.12);

      --titleColor: #000000;

      --indexOverlayBg: rgba(0,0,0,0.55);
      --indexPanelBg: #ffffff;
      --indexPanelText: #000000;
      --indexPanelSub: #6b6b6b;

      --indexItemBg: #ffffff;
      --indexItemBorder: rgba(0,0,0,0.12);
      --indexItemText: #000000;
      --indexItemBgHover: #3a3a3a;
      --indexItemTextHover: #ffffff;
      --indexItemBorderHover: rgba(0,0,0,0);

      --ctaBg: rgba(255,255,255,1);
      --ctaText: #000000;
      --ctaBorder: rgba(0,0,0,0.15);
      --ctaBgHover: #e0e0e0;
      --ctaTextHover: #000000;

      --indexBtnBg: #ffffff;
      --indexBtnText: #000000;
      --indexBtnBorder: rgba(0,0,0,0.15);
      --indexBtnBgHover: #dcdcdc;
      --indexBtnTextHover: #000000;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    html { scroll-behavior: smooth; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      overflow: hidden; /* we scroll inside .scroller */
      font-family: "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-weight: 400;
    }

    .hud { display: none !important; }

    /* SCROLLER: full-viewport pages with snap */
    .scroller {
      height: 100dvh;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
    }


    .slide {
      position: relative;
      min-height: 100dvh;
      width: 100%;
      background: #fafafa;
      color: #000000;
      scroll-snap-align: start;
      isolation: isolate;

      display: flex;
      align-items: center;
      justify-content: center;

      overflow: hidden;
    }

    .stage {
      position: relative;
      width: 100vw;
      height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }

    .stage img,
    .stage video {
      width: 110%;
      height: 110%;
      max-width: 110vw;
      max-height: 110dvh;
      object-fit: contain;
      object-position: center;
      display: block;
    }

    .video-wrapper {
      width: 100vw;
      height: 100dvh;

      display: flex;
      align-items: center;
      justify-content: center;

      max-height: 90dvh;
      max-width: 100vw;
      transform: translateY(5vh);
    }
    .video-wrapper video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
      max-width: 100%;
      max-height: 100%;
      display: block;
    }

    /* Top-left title block */
    .slide-title {
      position: absolute;
      top: 2rem;
      left: 2rem;
      z-index: 20;
      max-width: 80ch;
      pointer-events: none;
      white-space: pre-line;
      color: var(--titleColor);
      background: transparent;
      border: none;
      padding: 0;
    }
    .slide-title .title-main {
      display: block;
      font-weight: 500;
      font-size: 20px;
      line-height: 1.3;
      color: var(--titleColor);
    }
    .slide-title .title-sub {
      display: block;
      margin-top: .5rem;
      font-weight: 400;
      font-size: 16px;
      line-height: 1.3;
      color: var(--titleColor);
      white-space: pre-line;
    }

    /* CTA / HUD BUTTONS BASE STYLE */
    .cta-btn,
    .index-btn,
    .contact-btn {
      appearance: none;
      -webkit-appearance: none;

      border-radius: 999px;
      cursor: none;
      font-family: "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.2;
      padding: .5rem 0.9rem;
      text-align: center;
      box-shadow: 0 8px 30px rgba(0,0,0,.15);

      border: 1px solid var(--ctaBorder);
      background: var(--ctaBg);
      color: var(--ctaText);

      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease, background-color .15s ease, box-shadow .15s ease;
      z-index: 40;
    }

    /* bottom CTA variation */
    .cta-btn {
      position: absolute;
      bottom: 2.5rem;
      left: 50%;
      transform: translateX(-50%);
      min-width: 140px;
      padding: .6rem 1rem;
    }

    /* Top-right cluster: [Index] [Contact/Back] [Lang] */
    .index-btn {
      position: absolute;
      top: 1rem;
      right: 16.5rem;
      background: var(--indexBtnBg);
      border: 1px solid var(--indexBtnBorder);
      color: var(--indexBtnText);
      min-width: auto;
      padding: .5rem .8rem;
      font-size: 13px;
      box-shadow: 0 6px 20px rgba(0,0,0,.15);
    }
    .contact-btn {
      position: absolute;
      top: 1rem;
      right: 11rem;
      background: var(--indexBtnBg);
      border: 1px solid var(--indexBtnBorder);
      color: var(--indexBtnText);
      min-width: auto;
      padding: .5rem .8rem;
      font-size: 13px;
      box-shadow: 0 6px 20px rgba(0,0,0,.15);
    }

    /* Language segmented control */
    .lang-switch {
      position: absolute;
      top: 1rem;
      right: 1.5rem;
      display: inline-flex;
      gap: 2px;
      background: #fff;
      border: 1px solid var(--indexBtnBorder);
      border-radius: 999px;
      padding: 2px;
      box-shadow: 0 6px 20px rgba(0,0,0,.15);
      opacity: 0;
      pointer-events: none;
      z-index: 40;
      transition: opacity .25s ease, box-shadow .15s ease;
    }
    .lang-option {
      appearance: none;
      -webkit-appearance: none;
      border: 0;
      background: transparent;
      font: 500 12px/1 "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: .45rem .8rem;
      border-radius: 999px;
      cursor: none;
      color: #333;
    }
    .lang-option.is-active {
      background: #1f1f1f;
      color: #fff;
    }
    .lang-switch:hover { box-shadow: 0 10px 30px rgba(0,0,0,.25); }

    /* hover states */
    .cta-btn:hover,
    .cta-btn:focus-visible {
      outline: none;
      background: var(--ctaBgHover);
      color: var(--ctaTextHover);
      box-shadow: 0 10px 36px rgba(0,0,0,.22);
    }
    .index-btn:hover,
    .index-btn:focus-visible,
    .contact-btn:hover,
    .contact-btn:focus-visible {
      outline: none;
      background: var(--indexBtnBgHover);
      color: var(--indexBtnTextHover);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    /* CUSTOM CURSOR */
    .scroller, .scroller * { cursor: none !important; }
    html, body, #scroller, #scroller *, .slide, .slide *, .stage, .stage *, .hud, .hud * {
      cursor: none !important;
    }

    .cursor {
      position: fixed;
      left: 0;
      top: 0;
      width: 40px;
      height: 40px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 2000;
      opacity: 0;
      transition: opacity .15s ease;
    }
    .cursor .dot{
      display:block;
      width:100%;
      height:100%;
      border-radius: 999px;
      background: rgba(200,200,200,.38);
      transition: background .12s ease, transform .14s ease;
    }
    .cursor.visible { opacity: 0.9; }
    .cursor.solid .dot { background: #000000; }

    /* SCROLLBAR aesthetic */
    .scroller::-webkit-scrollbar{ width: 10px; }
    .scroller::-webkit-scrollbar-thumb{
      background: #2a2c31;
      border-radius: 999px;
    }

    /* INDEX OVERLAY */
    .index-overlay {
      position: fixed;
      inset: 0;
      z-index: 1500;
      background: var(--indexOverlayBg);
      backdrop-filter: blur(50px);
      -webkit-backdrop-filter: blur(50px);

      display: none;
      align-items: center;
      justify-content: center;
      padding: 4vh 4vw;
    }
    .index-panel {
      background: var(--indexPanelBg);
      color: var(--indexPanelText);
      border: 1px solid var(--panelBorder);
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.4);
      min-width: min(320px, 90vw);
      max-width: min(420px, 90vw);
      max-height: 80vh;
      overflow-y: auto;
      padding: 20px 24px;
      font-family: "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .index-header {
      font-size: 16px;
      font-weight: 500;
      line-height: 1.2;
      color: var(--indexPanelText);
      margin-bottom: 16px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }
    .index-close-hint {
      font-size: 12px;
      font-weight: 400;
      color: var(--indexPanelSub);
    }
    .index-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .index-section-title {
      font-size: 14px;
      font-weight: 500;
      line-height: 1.2;
      color: #000000;
      margin: 16px 0 8px 0;
    }
    .index-list-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .index-item-btn {
      appearance: none;
      -webkit-appearance: none;
      width: 100%;
      text-align: left;
      font-size: 14px;
      line-height: 1.3;
      font-weight: 500;
      font-family: inherit;
      background: var(--indexItemBg);
      color: #333333;
      border: 1px solid var(--indexItemBorder);
      border-radius: 12px;
      padding: 10px 12px;
      cursor: none;
      transition:
        background-color .15s ease,
        box-shadow .15s ease,
        color .15s ease,
        border-color .15s ease;
      display: block;
    }
    .index-item-btn .index-title {
      font-size: 14px;
      font-weight: 500;
      color: #787878;
      line-height: 1.3;
    }
    .index-item-btn:hover,
    .index-item-btn:focus-visible {
      outline: none;
      background: var(--indexItemBgHover);
      color: #ffffff;
      border-color: var(--indexItemBorderHover);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
       /* Active = same look as hover */
    .index-item-btn.is-active {
      background: var(--indexItemBgHover);
      color: #ffffff;
      border-color: var(--indexItemBorderHover);
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    .index-item-btn.is-active .index-title {
      color: #ffffff;
    }



    /* --- Contact Page: elements (default look) --- */
    .contact-block {
      z-index: 50;
      font-size: 25px;
      font-weight: 400;
      line-height: 1.3;
      color: #CFCFCF;
      white-space: pre-line;
      pointer-events: none;
    }

    .cv-link {
      z-index: 50;
      font-size: 25px;
      font-weight: 400;
      line-height: 1.3;
      color: #CFCFCF;
      background: transparent;
      border: none;
      padding: 0;
      margin: 0;
      text-decoration: underline;
      cursor: none;
      transition: color .15s ease;
    }
    .cv-link:hover,
    .cv-link:focus-visible {
      color: #ffffff;
      outline: none;
    }

         /* Bottom-left anchored contact layout */
  /* Only affect the last slide (your contact page) */
.slide:last-child .contact-layout {
  position: absolute;     /* was: fixed */
  left: 1rem;
  right: 1rem;            /* keeps a 1rem margin on the right too */
  bottom: 1rem;
  z-index: 10;

  display: grid;
  grid-template-columns: auto 1fr; /* image + text */
  gap: 2rem;
  align-items: end;
  padding: 0;
  overflow: visible;
}

  /* Let grid children shrink properly */
  .contact-layout > * {
    min-width: 0;
    min-height: 0;
  }

  /* Photo column */
  .contact-photo {
    display: flex;
    align-items: flex-end;          /* keep image on the bottom */
    justify-content: flex-start;    /* and to the left */
  }

  /* Image sizing (same visual size as before) */
  .contact-photo img {
    display: block;
    width: auto;
    height: auto;
    max-width: 420px;               /* approx same width as before */
    max-height: 60vh;               /* keep similar proportions */
    object-fit: contain;
    object-position: left bottom;
  }

  /* Contact text column */
  .contact-info {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;      /* bottom align text block */
    align-items: flex-start;
    gap: 1rem;
  }

  /* Ensure CV link appears above the contact text */
  .contact-info .cv-link       { order: 0; }
  .contact-info .contact-block { order: 1; }

  /* Guard against stray absolute positioning from elsewhere */
  .contact-layout .cv-link,
  .contact-layout .contact-block {
    position: static !important;
    left: auto !important;
    bottom: auto !important;
  }

  
    .contact-photo {
      min-height: 20vh;            /* reasonable height when stacked */
    }
  }



    @media (hover: none), (pointer: coarse) {
      .cursor { display: none !important; }
    }


    @media (hover: none), (pointer: coarse) {
      .cursor { display: none !important; }
    }



  </style>
</head>

<body>
  <div class="hud">Scroll / PgUp / PgDn — title stays in top-left per project</div>

  <!-- custom cursor -->
  <div id="cursor" class="cursor" aria-hidden="true"><span class="dot"></span></div>

  <!-- Main scroller -->
  <main id="scroller" class="scroller" aria-label="Portfolio slides"></main>

  <!-- INDEX OVERLAY -->
  <div id="indexOverlay" class="index-overlay" aria-hidden="true">
    <div class="index-panel" role="dialog" aria-modal="true" aria-label="Index">
      <div class="index-header">
        <div id="indexTitleLabel">Index</div>
        <div id="indexCloseHint" class="index-close-hint">click outside or Esc to close</div>
      </div>
      <div id="indexList" class="index-list"></div>
    </div>
  </div>

  <script>
    /* ===========================
       I18N STRINGS + STATE
    =========================== */
    const supportedLangs = ['en','de','fr'];
    let currentLang = 'en';

    const uiStrings = {
      indexTitle: { en:'Index', de:'Index', fr:'Index' },
      indexCloseHint: {
        en:'click outside to close',
        de:'Klicken Sie außerhalb, um zu schließen',
        fr:'cliquez à l’extérieur pour fermer'
      },
      discover:   { en:'Discover', de:'Entdecken', fr:'Découvrir' },
      seeProject: { en:'See the project', de:'Projekt ansehen', fr:'Voir le projet' },
      discover2:  { en:'Discover the projects', de:'Projekte entdecken', fr:'Découvrir les projets' },
      indexBtn:   { en:'Index', de:'Index', fr:'Index' },
      contactBtn: { en:'Contact', de:'Kontakt', fr:'Contact' },
      backBtn:    { en:'Back', de:'Zurück', fr:'Retour' },
      cvDownload: { en:'Download CV', de:'CV herunterladen', fr:'Télécharger le CV' },
      contactBlock: {
        en: "Name: Joé Mertenat\nTitle: Interaction & Information Designer\nEmail: joe.mertenat@bluewin.ch\nPhone: +41 79 237 07 77\nLocation: Rue des Voignous 12, 2800 Delémont, Switzerland",
        de: "Name: Joé Mertenat\nTitel: Interaction & Information Designer\nE-Mail: joe.mertenat@bluewin.ch\nTelefon: +41 79 237 07 77\nAdresse: Rue des Voignous 12, 2800 Delémont, Schweiz",
        fr: "Nom: Joé Mertenat\nTitre: Interaction & Information Designer\nE-mail: joe.mertenat@bluewin.ch\nTéléphone: +41 79 237 07 77\nAdresse: Rue des Voignous 12, 2800 Delémont, Suisse"
      }
    };

    const cvPaths = {
      en: 'assets/cv/CV_Joe-Mertenat_2025(EN).pdf',
      de: 'assets/cv/CV_Joe-Mertenat_2025(DE).pdf',
      fr: 'assets/cv/CV_Joe-Mertenat_2025(FR).pdf'
    };


    const contactImageSrc = 'assets/img/contact.JPG'; // set your actual image path



    /* ===========================
       PROJECT GROUPS (with i18n headings)
    =========================== */
    const projects = [
      {
        headingI18n: {
          en: "Project 1: Architecture Studio Archive",
          de: "Projekt 1: Architecture Studio Archive",
          fr: "Projet 1 : Architecture Studio Archive"
        },
        indices: [2,3,4,5]
      },
      {
        headingI18n: {
          en: "Project 2: Business Management App",
          de: "Projekt 2: Business Management App",
          fr: "Projet 2 : Business Management App"
        },
        indices: [6,7,8,9,10]
      },
      {
        headingI18n: {
          en: "Project 3: Sentiment Dashboard",
          de: "Projekt 3: Sentiment Dashboard",
          fr: "Projet 3 : Sentiment Dashboard"
        },
        indices: [11,12,13,14,15]
      },
      {
        headingI18n: {
          en: "Project 4: Interactive Infographics (Housing Module)",
          de: "Projekt 4: Interactive Infographics (Housing Module)",
          fr: "Projet 4 : Interactive Infographics (Housing Module)"
        },
        indices: [16,17,18,19]
      }
    ];

    /* ===========================
       SLIDE CONFIG with i18n
    =========================== */
    const slides = [
      {
        type: 'image',
        src: 'assets/svg/A_Title.svg',
        i18n: {
          en: { src: 'assets/svg/en/A_Title.svg', title: 'Who am I?', indexTitle: 'Intro — Title' },
          de: { src: 'assets/svg/de/A_Title.svg', title: 'Wer bin ich?', indexTitle: 'Intro — Titel' },
          fr: { src: 'assets/svg/fr/A_Title.svg', title: 'Qui suis-je ?', indexTitle: 'Intro — Titre' }
        },
        showTitle: false,
        ctaType: 'discover'
      },
      {
        type: 'image',
        src: 'assets/svg/A_Intro.svg',
        i18n: {
          en: { src: 'assets/svg/en/A_Intro.svg', title: 'My expertise and skills', indexTitle: 'Intro — Skills' },
          de: { src: 'assets/svg/de/A_Intro.svg', title: 'Meine Expertise und Fähigkeiten', indexTitle: 'Intro — Fähigkeiten' },
          fr: { src: 'assets/svg/fr/A_Intro.svg', title: 'Mes expertises et compétences', indexTitle: 'Intro — Compétences' }
        },
        showTitle: false,
        ctaType: 'discover2'
      },

     
      {
        type: 'image',
        src: 'assets/svg/B1.2_Project1_ProblemFraming.svg',
        i18n: {
          en: { src:'assets/svg/en/B1.2_Project1_ProblemFraming.svg', title:'Problem Framing', indexTitle:'P1 — Problem' },
          de: { src:'assets/svg/de/B1.2_Project1_ProblemFraming.svg', title:'Problemrahmen', indexTitle:'P1 — Problem' },
          fr: { src:'assets/svg/fr/B1.2_Project1_ProblemFraming.svg', title:'Cadre du problème', indexTitle:'P1 — Problème' }
        },
        showTitle: false,
        ctaType: 'seeProject'
      },

      {
        type: 'image',
        src: 'assets/png/project1_nav.svg',
        i18n: {
          en: { src:'assets/png/project1_nav.svg', title:'User flow scenario – searching for a specific project in the archive', indexTitle:'P1 — Flow' },
          de: { src:'assets/png/project1_nav.svg', title:'User-Flow-Szenario – Suche nach einem spezifischen Projekt im Archiv', indexTitle:'P1 — Flow' },
          fr: { src:'assets/png/project1_nav.svg', title:'Scénario de parcours utilisateur – recherche d’un projet spécifique dans l’archive', indexTitle:'P1 — Flow' }
        },
        showTitle: true
      },
     
      {
        type: 'video',
        src: 'assets/video/project1_video1.mp4',
        i18n: {
          en: { title:'“How to make time navigable, not just visible”', indexTitle:'P1 — Solution' },
          de: { title:'„Zeit navigierbar machen, nicht nur sichtbar“', indexTitle:'P1 — Lösung' },
          fr: { title:'« Rendre le temps navigable, pas seulement visible »', indexTitle:'P1 — Solution' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project1_video2.mp4',
        i18n: {
          en: { title:'“Creating multiple entry points without losing cohesion”', indexTitle:'P1 — Solution' },
          de: { title:'„Mehrere Einstiegspunkte ohne Kohärenzverlust“', indexTitle:'P1 — Lösung' },
          fr: { title:'« Multiples portes d’entrée sans perdre la cohérence »', indexTitle:'P1 — Solution' }
        },
        showTitle: true
      },

     
      {
        type: 'image',
        src: 'assets/svg/B2.2_Project2_ProblemFraming.svg',
        i18n: {
          en: { src:'assets/svg/en/B2.2_Project2_ProblemFraming.svg', title:'Problem Framing', indexTitle:'P2 — Problem' },
          de: { src:'assets/svg/de/B2.2_Project2_ProblemFraming.svg', title:'Problemrahmen', indexTitle:'P2 — Problem' },
          fr: { src:'assets/svg/fr/B2.2_Project2_ProblemFraming.svg', title:'Cadre du problème', indexTitle:'P2 — Problème' }
        },
        showTitle: false,
        ctaType: 'seeProject'
      },

      {
        type: 'image',
        src: 'assets/png/project2_nav.svg',
        i18n: {
          en: { src:'assets/png/project2_nav.svg', title:'User flow scenario – task management process', indexTitle:'P2 — Flow' },
          de: { src:'assets/png/project2_nav.svg', title:'User-Flow-Szenario – Aufgabenverwaltungsprozess', indexTitle:'P2 — Flow' },
          fr: { src:'assets/png/project2_nav.svg', title:'Scénario de parcours utilisateur – processus de gestion des tâches', indexTitle:'P2 — Flow' }
        },
        showTitle: true
      },
      {
        type: 'image',
        src: 'assets/png/project2_wireframe.svg',
        i18n: {
          en: { src:'assets/png/project2_wireframe.svg', title:'Wireframe - task management process', indexTitle:'P2 — Wireframe' },
          de: { src:'assets/png/project2_wireframe.svg', title:'Wireframe — Aufgabenverwaltungsprozess', indexTitle:'P2 — Wireframe' },
          fr: { src:'assets/png/project2_wireframe.svg', title:'Wireframe — processus de gestion des tâches', indexTitle:'P2 — Wireframe' }
        },
        showTitle: true
      },
      {
        type: 'image',
        src: 'assets/svg/B2.3Project2_Approach1.svg',
        i18n: {
          en: { src:'assets/svg/en/B2.3Project2_Approach1.svg', title:'“Simplify complexity without losing functionality”', indexTitle:'P2 — Solution' },
          de: { src:'assets/svg/de/B2.3Project2_Approach1.svg', title:'„Komplexität vereinfachen ohne Funktionen zu verlieren“', indexTitle:'P2 — Lösung' },
          fr: { src:'assets/svg/fr/B2.3Project2_Approach1.svg', title:'« Simplifier la complexité sans perdre en fonctionnalité »', indexTitle:'P2 — Solution' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project2_video1.mp4',
        i18n: {
          en: { title:'“Design for low digital literacy”', indexTitle:'P2 — Solution' },
          de: { title:'„Für geringe digitale Kompetenz gestalten“', indexTitle:'P2 — Lösung' },
          fr: { title:'« Concevoir pour faible littératie numérique »', indexTitle:'P2 — Solution' }
        },
        showTitle: true
      },

     
      {
        type: 'image',
        src: 'assets/svg/B3.2_Project3_ProblemFraming.svg',
        i18n: {
          en: { src:'assets/svg/en/B3.2_Project3_ProblemFraming.svg', title:'Problem Framing', indexTitle:'P3 — Problem' },
          de: { src:'assets/svg/de/B3.2_Project3_ProblemFraming.svg', title:'Problemrahmen', indexTitle:'P3 — Problem' },
          fr: { src:'assets/svg/fr/B3.2_Project3_ProblemFraming.svg', title:'Cadre du problème', indexTitle:'P3 — Problème' }
        },
        showTitle: false,
        ctaType: 'seeProject'
      },

      {
        type: 'image',
        src: 'assets/png/project3_nav.svg',
        i18n: {
          en: { src:'assets/png/project3_nav.svg', title:'User flow scenario — overview-to-detail navigation', indexTitle:'P3 — Flow' },
          de: { src:'assets/png/project3_nav.svg', title:'User-Flow-Szenario — Navigation vom Überblick zur Detailansicht', indexTitle:'P3 — Flow' },
          fr: { src:'assets/png/project3_nav.svg', title:'Scénario de parcours utilisateur — du survol à la vue détaillée', indexTitle:'P3 — Flow' }
        },
        showTitle: true
      },

      {
        type: 'video',
        src: 'assets/video/project3_video1.mp4',
        i18n: {
          en: { title:'“Designing interactivity as inquiry”', indexTitle:'P3 — Solution' },
          de: { title:'„Interaktivität als Untersuchung gestalten“', indexTitle:'P3 — Lösung' },
          fr: { title:'« Concevoir l’interactivité comme enquête »', indexTitle:'P3 — Solution' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project3_video3.mp4',
        i18n: {
          en: { title:'“Enabling critical comparison between algorithmic interpretations”', indexTitle:'P3 — Solution' },
          de: { title:'„Kritische Vergleiche algorithmischer Interpretationen ermöglichen“', indexTitle:'P3 — Lösung' },
          fr: { title:'« Permettre la comparaison critique entre interprétations algorithmiques »', indexTitle:'P3 — Solution' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project3_video2.mp4',
        i18n: {
          en: { title:'“Guiding interpretation through interface”', indexTitle:'P3 — Solution' },
          de: { title:'„Interpretation über die Schnittstelle leiten“', indexTitle:'P3 — Lösung' },
          fr: { title:'« Guider l’interprétation via l’interface »', indexTitle:'P3 — Solution' }
        },
        showTitle: true
      },

      
      {
        type: 'image',
        src: 'assets/svg/B4.2_Project4_ProblemFraming.svg',
        i18n: {
          en: { src:'assets/svg/en/B4.2_Project4_ProblemFraming.svg', title:'Problem Framing', indexTitle:'P4 — Problem' },
          de: { src:'assets/svg/de/B4.2_Project4_ProblemFraming.svg', title:'Problemrahmen', indexTitle:'P4 — Problem' },
          fr: { src:'assets/svg/fr/B4.2_Project4_ProblemFraming.svg', title:'Cadre du problème', indexTitle:'P4 — Problème' }
        },
        showTitle: false,
        ctaType: 'seeProject'
      },
      {
        type: 'image',
        src: 'assets/png/project4_wireframe.svg',
        i18n: {
          en: { src:'assets/png/project4_wireframe.svg', title:'Wireframe – Macro / Micro Navigation', indexTitle:'P4 — Wireframe' },
          de: { src:'assets/png/project4_wireframe.svg', title:'Wireframe – Makro- / Mikro-Navigation', indexTitle:'P4 — Wireframe' },
          fr: { src:'assets/png/project4_wireframe.svg', title:'Wireframe — navigation macro / micro', indexTitle:'P4 — Wireframe' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project4_video1.mp4',
        i18n: {
          en: { title:'“Balancing minimalism with informational depth”', indexTitle:'P4 — Solution' },
          de: { title:'„Minimalismus mit Informationsdichte ausbalancieren“', indexTitle:'P4 — Lösung' },
          fr: { title:'« Équilibrer minimalisme et profondeur informative »', indexTitle:'P4 — Solution' }
        },
        showTitle: true
      },
      {
        type: 'video',
        src: 'assets/video/project4_video2.mp4',
        i18n: {
          en: { title:'“Using interaction to support understanding”', indexTitle:'P4 — Solution' },
          de: { title:'„Interaktion zur Verständnishilfe nutzen“', indexTitle:'P4 — Lösung' },
          fr: { title:'« Utiliser l’interaction pour soutenir la compréhension »', indexTitle:'P4 — Solution' }
        },
        showTitle: true
      },

      // END / CONTACT PAGE
      {
        type: 'image',
        src: 'assets/svg/C_EndPage.svg',
        i18n: {
          en: { src:'assets/svg/en/C_EndPage.svg', indexTitle:'Contact' },
          de: { src:'assets/svg/de/C_EndPage.svg', indexTitle:'Kontakt' },
          fr: { src:'assets/svg/fr/C_EndPage.svg', indexTitle:'Contact' }
        },
        showTitle: false
      }
    ];



    /* ============ DOM HOOKS ============ */
    const scroller = document.getElementById('scroller');
    const indexOverlay = document.getElementById('indexOverlay');
    const indexList = document.getElementById('indexList');
    const indexTitleLabel = document.getElementById('indexTitleLabel');
    const indexCloseHint = document.getElementById('indexCloseHint');
    const cursor = document.getElementById('cursor');

    let cursorVisible = false;
    const rendered = []; // [{ slide, mediaEl, titleEl, cvLinkEl, contactBlockEl, idxBtnEl, contactBtnEl, langEl, conf, ctaEl }]
    let lastNonContactSlide = null; // remember source slide when using "Contact"

    let lastActiveIdx = 0; 

    /* ============ BUILD HELPERS ============ */
    function buildTitleNode(rawTitle){
      const box = document.createElement('div');
      box.className = 'slide-title';
      const parts = (rawTitle || '').split('\n');
      const mainLine = parts.shift() || '';
      const rest = parts.join('\n');

      const mainSpan = document.createElement('span');
      mainSpan.className = 'title-main';
      mainSpan.textContent = mainLine;
      box.appendChild(mainSpan);

      if (rest.trim() !== '') {
        const subSpan = document.createElement('span');
        subSpan.className = 'title-sub';
        subSpan.textContent = rest;
        box.appendChild(subSpan);
      }
      return box;
    }

    function buildCTAButton(slideIndex, ctaType){
      if (!ctaType) return null;
      const key = (ctaType === 'see-project' || ctaType === 'seeProject') ? 'seeProject'
                 : (ctaType === 'discover2' ? 'discover2' : 'discover');
      const text = uiStrings[key][currentLang];

      const btn = document.createElement('button');
      btn.className = 'cta-btn';
      btn.type = 'button';
      btn.textContent = text;
      btn.dataset.ctaKey = key; // remember which translation key to use later
      btn.setAttribute('data-jump-from', String(slideIndex));

      btn.addEventListener('pointerenter', () => setCursorSolid(true));
      btn.addEventListener('pointerleave', () => setCursorSolid(false));
      btn.addEventListener('click', () => {
        const slidesEl = Array.from(scroller.querySelectorAll('.slide'));
        const target = slidesEl[slideIndex + 1];
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
      return btn;
    }

    function buildIndexButton(){
      const btn = document.createElement('button');
      btn.className = 'index-btn';
      btn.type = 'button';
      btn.textContent = uiStrings.indexBtn[currentLang];
      btn.addEventListener('pointerenter', () => setCursorSolid(true));
      btn.addEventListener('pointerleave', () => setCursorSolid(false));
      btn.addEventListener('click', openIndexOverlay);
      return btn;
    }

    function buildContactButton(){
      const btn = document.createElement('button');
      btn.className = 'contact-btn';
      btn.type = 'button';
      btn.textContent = uiStrings.contactBtn[currentLang];

      btn.addEventListener('pointerenter', () => setCursorSolid(true));
      btn.addEventListener('pointerleave', () => setCursorSolid(false));
      btn.addEventListener('click', () => {
        const slidesEl = Array.from(scroller.querySelectorAll('.slide'));
        const lastSlideEl = slidesEl[slides.length - 1];
        const currentIdx = getCurrentSlideIndex();

        if (btn.getAttribute('data-mode') === 'back') {
          if (lastNonContactSlide != null) {
            const backTarget = slidesEl[lastNonContactSlide];
            if (backTarget) backTarget.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
          return;
        }
        lastNonContactSlide = currentIdx;
        if (lastSlideEl) lastSlideEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
      return btn;
    }

    function buildLangSwitch(){
      const wrap = document.createElement('div');
      wrap.className = 'lang-switch';
      supportedLangs.forEach(code => {
        const opt = document.createElement('button');
        opt.type = 'button';
        opt.className = 'lang-option';
        opt.textContent = code.toUpperCase();
        if (code === currentLang) opt.classList.add('is-active');

        opt.addEventListener('pointerenter', () => setCursorSolid(true));
        opt.addEventListener('pointerleave', () => setCursorSolid(false));
        opt.addEventListener('click', () => setLanguage(code));

        wrap.appendChild(opt);
      });
      return wrap;
    }

    /* ============ RENDER SLIDES ============ */
    slides.forEach((s, idx) => {
      const slide = document.createElement('section');
      slide.className = 'slide';
      slide.setAttribute('data-index', idx);

      const stage = document.createElement('figure');
      stage.className = 'stage';
      stage.style.margin = 0;

      let mediaEl;
      if (s.type === 'video') {
        const wrapper = document.createElement('div');
        wrapper.className = 'video-wrapper';

        const vid = document.createElement('video');
        vid.src = s.src;
        vid.playsInline = true;
        vid.muted = true;
        vid.autoplay = true;
        vid.loop = true;

        mediaEl = vid;
        wrapper.appendChild(vid);
        stage.appendChild(wrapper);
      } else {
        const img = new Image();
        img.src = s.src;
        img.alt = `Slide ${idx+1}`;
        img.loading = 'lazy';
        img.decoding = 'async';
        mediaEl = img;
        stage.appendChild(img);
      }

      // title block if requested
      let titleEl = null;
      const initialTitle = (s.i18n?.[currentLang]?.title) || s.title || '';
      if (s.showTitle && (initialTitle || '').trim() !== '') {
        titleEl = buildTitleNode(initialTitle);
        slide.appendChild(titleEl);
      }

      const ctaBtn = buildCTAButton(idx, s.ctaType);
      if (ctaBtn) slide.appendChild(ctaBtn);

      const idxBtnEl = buildIndexButton();
      slide.appendChild(idxBtnEl);

      const contactBtnEl = buildContactButton();
      slide.appendChild(contactBtnEl);

      const langEl = buildLangSwitch();
      slide.appendChild(langEl);

      slide.appendChild(stage);

      // Contact page extras (last slide) — NEW layout
      let contactBlockEl = null;
      let cvLinkEl = null;
      if (idx === slides.length - 1) {
        // Grid wrapper
        const contactLayout = document.createElement('div');
        contactLayout.className = 'contact-layout';

        // Left: photo
        const photoWrap = document.createElement('div');
        photoWrap.className = 'contact-photo';
        const imgEl = new Image();
        imgEl.src = contactImageSrc;
        imgEl.alt = 'Portrait';
        photoWrap.appendChild(imgEl);

        // Right: info column
        const infoWrap = document.createElement('div');
        infoWrap.className = 'contact-info';

        contactBlockEl = document.createElement('div');
        contactBlockEl.className = 'contact-block';
        contactBlockEl.textContent = uiStrings.contactBlock[currentLang];

        cvLinkEl = document.createElement('button');
        cvLinkEl.type = 'button';
        cvLinkEl.className = 'cv-link';
        cvLinkEl.textContent = uiStrings.cvDownload[currentLang];
        cvLinkEl.addEventListener('click', () => window.open(cvPaths[currentLang] || cvPaths.en, '_blank'));
        cvLinkEl.addEventListener('pointerenter', () => setCursorSolid(true));
        cvLinkEl.addEventListener('pointerleave', () => setCursorSolid(false));

        // Do:
        infoWrap.appendChild(cvLinkEl);
        infoWrap.appendChild(contactBlockEl);

        contactLayout.appendChild(photoWrap);
        contactLayout.appendChild(infoWrap);
        slide.appendChild(contactLayout);
      }


      rendered.push({
        slide, mediaEl, titleEl, cvLinkEl, contactBlockEl,
        idxBtnEl, contactBtnEl, langEl, conf: s, ctaEl: ctaBtn
      });
      scroller.appendChild(slide);
    });

    /* ============ INDEX OVERLAY CONTENT ============ */
    function buildIndexOverlayContents() {
      indexList.innerHTML = "";
      const activeIdx = lastActiveIdx;


      projects.forEach(group => {
        const sectionTitle = document.createElement('div');
        sectionTitle.className = 'index-section-title';
        sectionTitle.textContent = group.headingI18n?.[currentLang] || group.headingI18n?.en || '';
        indexList.appendChild(sectionTitle);

        const groupWrap = document.createElement('div');
        groupWrap.className = 'index-list-group';

        group.indices.forEach(i => {
          const slideConf = slides[i];
          const itemBtn = document.createElement('button');
          itemBtn.type = 'button';
          itemBtn.className = 'index-item-btn';
          itemBtn.setAttribute('data-goto', String(i));

          const titleDiv = document.createElement('div');
          titleDiv.className = 'index-title';
          const idxTitle = slideConf.i18n?.[currentLang]?.indexTitle
                        || slideConf.i18n?.en?.indexTitle
                        || slideConf.title
                        || `Slide ${i+1}`;
          titleDiv.textContent = idxTitle;
          itemBtn.appendChild(titleDiv);

          // ✅ highlight current page immediately
          if (i === activeIdx) itemBtn.classList.add('is-active');

          itemBtn.addEventListener('pointerenter', () => setCursorSolid(true));
          itemBtn.addEventListener('pointerleave', () => setCursorSolid(false));
          itemBtn.addEventListener('click', () => {
            const slideEls = Array.from(scroller.querySelectorAll('.slide'));
            const target = slideEls[i];
            if (target) {
              closeIndexOverlay();
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });

          groupWrap.appendChild(itemBtn);
        });

        indexList.appendChild(groupWrap);
      });
    }


    buildIndexOverlayContents();

    /* ============ ACTIVE SLIDE HELPERS ============ */
    function getCurrentSlideIndex() {
      const slidesEl = Array.from(document.querySelectorAll('.slide'));
      const midEl = document
        .elementFromPoint(window.innerWidth / 2, window.innerHeight / 2)
        ?.closest('.slide');
      return slidesEl.indexOf(midEl);
    }

    function updateIndexHighlight() {
    let activeIdx = getCurrentSlideIndex();

    // If overlay is open (or we couldn't detect a slide), use the cached value
    const overlayOpen = indexOverlay.getAttribute('aria-hidden') === 'false';
    if (activeIdx < 0 || overlayOpen) activeIdx = lastActiveIdx;

    // cache for later (when overlay opens)
    if (activeIdx >= 0) lastActiveIdx = activeIdx;

    const allBtns = indexList.querySelectorAll('.index-item-btn');
    allBtns.forEach(btn => {
      const goto = parseInt(btn.getAttribute('data-goto'), 10);
      btn.classList.toggle('is-active', goto === activeIdx);
    });
  }


    /* ============ OVERLAY ============ */
    function openIndexOverlay(){
      indexOverlay.style.display = 'flex';
      indexOverlay.setAttribute('aria-hidden','false');
      indexTitleLabel.textContent = uiStrings.indexTitle[currentLang];
      indexCloseHint.textContent = uiStrings.indexCloseHint[currentLang];
      buildIndexOverlayContents();
      updateIndexHighlight();
    }
    function closeIndexOverlay(){
      indexOverlay.style.display = 'none';
      indexOverlay.setAttribute('aria-hidden','true');
    }
    indexOverlay.addEventListener('click', (e) => {
      const panel = e.target.closest('.index-panel');
      if (!panel) closeIndexOverlay();
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeIndexOverlay();
    });

    /* ============ CURSOR ============ */
    function setCursorSolid(solid){
      if (!cursorVisible) return;
      cursor.classList.toggle('solid', !!solid);
    }
    function handlePointer(e){
      cursor.classList.add('visible');
      cursorVisible = true;
      const onHot =
        !!e.target.closest('.index-btn') ||
        !!e.target.closest('.contact-btn') ||
        !!e.target.closest('.lang-switch') ||
        !!e.target.closest('.cta-btn') ||
        !!e.target.closest('.index-item-btn') ||
        !!e.target.closest('.cv-link');
      cursor.classList.toggle('solid', onHot);
    }
    let px = 0, py = 0, tx = 0, ty = 0;
    const lerp = (a,b,t)=>a+(b-a)*t;
    function raf(){
      px = lerp(px, tx, 0.25);
      py = lerp(py, ty, 0.25);
      cursor.style.transform = `translate(${px - 20}px, ${py - 20}px)`;
      requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);
    window.addEventListener('pointermove', (e)=>{
      tx = e.clientX;
      ty = e.clientY;
      handlePointer(e);
    }, { passive: true });
    window.addEventListener('pointerleave', ()=>{
      cursor.classList.remove('visible','solid');
      cursorVisible = false;
    });

    /* ============ CONTACT BUTTON MODE (Contact vs Back) ============ */
    function updateContactButtonModes() {
      const currentIdx = getCurrentSlideIndex();
      const isOnLast = currentIdx === slides.length - 1;

      rendered.forEach(r => {
        const btn = r.contactBtnEl;
        if (!btn) return;

        if (isOnLast) {
          if (lastNonContactSlide != null) {
            btn.textContent = uiStrings.backBtn[currentLang];
            btn.setAttribute('data-mode', 'back');
            btn.style.opacity = '1';
            btn.style.pointerEvents = 'auto';
          } else {
            // arrived on last page WITHOUT using contact: hide Back
            btn.style.opacity = '0';
            btn.style.pointerEvents = 'none';
            btn.removeAttribute('data-mode');
            btn.textContent = uiStrings.contactBtn[currentLang];
          }
        } else {
          btn.textContent = uiStrings.contactBtn[currentLang];
          btn.setAttribute('data-mode', 'contact');
        }
      });
    }

    /* ============ BUTTON VISIBILITY PER ACTIVE SLIDE ============ */
    function updateButtonVisibility(){
      const idx = getCurrentSlideIndex();

      rendered.forEach((r, i) => {
        const active = (i === idx);

        const cta = r.ctaEl;
        if (cta){
          if (active){ cta.style.opacity = '1'; cta.style.pointerEvents = 'auto'; }
          else       { cta.style.opacity = '0'; cta.style.pointerEvents = 'none'; }
        }

        if (r.idxBtnEl){
          const isLast = (i === slides.length - 1);
          if (active && !isLast){ r.idxBtnEl.style.opacity = '1'; r.idxBtnEl.style.pointerEvents = 'auto'; }
          else                   { r.idxBtnEl.style.opacity = '0'; r.idxBtnEl.style.pointerEvents = 'none'; }
        }

        if (r.contactBtnEl){
          if (active){ r.contactBtnEl.style.opacity = '1'; r.contactBtnEl.style.pointerEvents = 'auto'; }
          else       { r.contactBtnEl.style.opacity = '0'; r.contactBtnEl.style.pointerEvents = 'none'; }
        }

        if (r.langEl){
          if (active){ r.langEl.style.opacity = '1'; r.langEl.style.pointerEvents = 'auto'; }
          else       { r.langEl.style.opacity = '0'; r.langEl.style.pointerEvents = 'none'; }
        }
      });

      updateContactButtonModes();
    }

    /* ============ LANGUAGE APPLY/SETTER ============ */
    function updateLangSwitchVisuals(){
      rendered.forEach(r => {
        if (!r.langEl) return;
        r.langEl.querySelectorAll('.lang-option').forEach(btn => {
          btn.classList.toggle('is-active', btn.textContent.toLowerCase() === currentLang);
        });
      });
    }

    function applyLanguageToSlides(){
      // Update per-slide media + titles + CTAs + top labels
      rendered.forEach((r, idx) => {
        const conf = r.conf;
        const langPack = conf.i18n?.[currentLang] || conf.i18n?.en || {};
        // media
        if (conf.type === 'image' && r.mediaEl?.tagName === 'IMG') {
          const src = langPack.src || conf.src;
          if (src) r.mediaEl.src = src;
        }
        // titles
        const titleText = langPack.title || conf.title || '';
        if (conf.showTitle) {
          if (r.titleEl) {
            const parts = titleText.split('\n');
            const main = parts.shift() || '';
            const rest = parts.join('\n');
            const mainEl = r.titleEl.querySelector('.title-main');
            const subEl  = r.titleEl.querySelector('.title-sub');
            if (mainEl) mainEl.textContent = main;
            if (rest.trim() !== '') {
              if (subEl) subEl.textContent = rest;
              else {
                const newSub = document.createElement('span');
                newSub.className = 'title-sub';
                newSub.textContent = rest;
                r.titleEl.appendChild(newSub);
              }
            } else if (subEl) {
              subEl.remove();
            }
          } else if ((titleText || '').trim() !== '') {
            const t = buildTitleNode(titleText);
            r.slide.insertBefore(t, r.slide.firstChild);
            r.titleEl = t;
          }
        }
        // Contact page localized content
        if (idx === slides.length - 1) {
          if (r.contactBlockEl) r.contactBlockEl.textContent = uiStrings.contactBlock[currentLang];
          if (r.cvLinkEl) r.cvLinkEl.textContent = uiStrings.cvDownload[currentLang];
        }

        if (idx === slides.length - 1 && r.cvLinkEl) {
          r.cvLinkEl.onclick = () => window.open(cvPaths[currentLang] || cvPaths.en, '_blank');
        }
        // Top buttons localized labels
        if (r.idxBtnEl) r.idxBtnEl.textContent = uiStrings.indexBtn[currentLang];
        // CTA text by its key
        if (r.ctaEl && r.ctaEl.dataset.ctaKey){
          r.ctaEl.textContent = uiStrings[r.ctaEl.dataset.ctaKey][currentLang];
        }
      });

      // Index overlay text
      indexTitleLabel.textContent = uiStrings.indexTitle[currentLang];
      indexCloseHint.textContent = uiStrings.indexCloseHint[currentLang];

      // Refresh visuals
      updateLangSwitchVisuals();
      buildIndexOverlayContents();
      updateContactButtonModes();
      updateButtonVisibility();
      updateIndexHighlight();
    }

    function setLanguage(lang){
      if (!supportedLangs.includes(lang)) return;
      currentLang = lang;
      document.documentElement.setAttribute('lang', lang);
      applyLanguageToSlides();
      // Preload language-specific images
      slides.forEach(s => {
        const src = s.i18n?.[lang]?.src;
        if (s.type === 'image' && src){
          const img = new Image();
          img.src = src;
        }
      });
    }

    /* ============ SCROLL/RESIZE/KEYS ============ */
    let ticking = false;
    function onScroll(){
      if (!ticking) {
        ticking = true;
        requestAnimationFrame(()=>{
          updateButtonVisibility();
          updateIndexHighlight();
          ticking = false;
        });
      }
    }
    document.getElementById('scroller').addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', () => {
      updateButtonVisibility();
      updateIndexHighlight();
    });

    window.addEventListener('keydown', e => {
      if (e.key !== 'PageDown' && e.key !== 'PageUp') return;
      e.preventDefault();
      const slidesEl = Array.from(document.querySelectorAll('.slide'));
      const current = document.elementFromPoint(
        window.innerWidth/2,
        window.innerHeight/2
      )?.closest('.slide');
      const i = slidesEl.indexOf(current);
      if (i < 0) return;
      const next = e.key === 'PageDown' ? slidesEl[i+1] : slidesEl[i-1];
      if (next) next.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    /* ============ INITIALIZE ============ */
    // Pre-render language switch opacity handling occurs in updateButtonVisibility.
    slides.slice(1).forEach(s => {
      if (s.type === 'image') {
        const preload = s.i18n?.[currentLang]?.src || s.src;
        if (preload) { const i = new Image(); i.src = preload; }
      }
    });




    updateButtonVisibility();
    updateIndexHighlight();
    applyLanguageToSlides();
  </script>
</body>
</html>
